{"version":3,"sources":["webpack:///./src/views/CPartner/Settings/Profile.vue?d0bc","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/core-js/internals/not-a-regexp.js","webpack:///./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack:///./src/views/CPartner/Settings/Profile.vue?4d10","webpack:///./src/views/CPartner/Settings/Profile.vue","webpack:///./src/views/CPartner/Settings/Profile.vue?ceca","webpack:///./src/views/CPartner/Settings/Profile.vue?aff5","webpack:///./src/compositions/validators/useForm.ts"],"names":["$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","String","this","indexOf","arguments","length","undefined","isRegExp","module","exports","it","TypeError","wellKnownSymbol","MATCH","METHOD_NAME","regexp","error1","error2","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticRenderFns","components","PageTitle","ProfileName","ProfileReqs","ProfileWidgets","ProfileNotys","component","useForm","params","defaultValues","watchAfterSubmit","fields","rename","Object","assign","plainValues","plainErrors","isValid","isSubmit","isSubmiting","keys","map","key","field","value","errors","values","validate","resolvers","Promise","all","boolArray","handleSubmit","cb","serialize","toSend","currentKey","newErrors","currentErrors","newValues"],"mappings":"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","file":"js/chunk-59447872.741bb510.js","sourcesContent":["export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--8-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=style&index=0&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"settings-profile\"},[_c('page-title',[_c('h2',[_vm._v(\"Профиль\")])]),_c('profile-name',{staticClass:\"mb-20\"}),_c('profile-reqs',{staticClass:\"mb-20\"}),_c('div',{staticClass:\"row settings-profile__row\"},[_c('div',{staticClass:\"col-xl-6 settings-profile__col\"},[_c('profile-widgets')],1),_c('div',{staticClass:\"col-xl-6 settings-profile__col\"},[_c('profile-notys')],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport ProfileNotys from \"@/components/Settings/Profile/ProfileNotys.vue\";\nimport ProfileWidgets from \"@/components/Settings/Profile/ProfileWidgets.vue\";\nimport ProfileReqs from \"@/components/Settings/Profile/ProfileReqs.vue\";\nimport ProfileName from \"@/components/Settings/Profile/ProfileName.vue\";\nimport PageTitle from \"@/components/Page/PageTitle.vue\";\nimport { Component, Vue } from \"vue-property-decorator\";\n\n@Component({\n  components: {\n    PageTitle,\n    ProfileName,\n    ProfileReqs,\n    ProfileWidgets,\n    ProfileNotys,\n  },\n})\nexport default class SettingsProfile extends Vue {}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--14-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--14-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Profile.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Profile.vue?vue&type=template&id=ce9c2a26&\"\nimport script from \"./Profile.vue?vue&type=script&lang=ts&\"\nexport * from \"./Profile.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Profile.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { reactive, ref, Ref, watch } from \"@vue/composition-api\";\nimport { UseFieldModel } from \"./useField\";\n\n\ninterface UseFormParams {\n    fields: {\n        [key: string]: UseFieldModel\n    },\n    watchAfterSubmit?: boolean,\n    rename?: {\n        [key: string]: string\n    },\n}\ninterface UseFormErrors {\n    [key: string]: Ref<string[]>\n}\nexport default function useForm(params: UseFormParams) {\n    const defaultValues: UseFormParams = {\n        watchAfterSubmit: true,\n        fields: {},\n        rename: {}\n    }\n    const { fields, watchAfterSubmit, rename } = Object.assign({}, defaultValues, params)\n    let plainValues = {}\n    let plainErrors = {}\n    const isValid = ref(false)\n    const isSubmit = ref(false)\n    const isSubmiting = ref(false)\n    Object.keys(fields).map(key => {\n        const field: UseFieldModel = fields[key]\n        plainValues[key] = field.value\n        plainErrors[key] = field.errors\n    })\n    const values = reactive<{ [key: string]: any }>(plainValues)\n    const errors: any = reactive<{ [key: string]: Array<string> }>(plainErrors)\n\n    const validate = async () => {\n        const resolvers = Object.keys(fields).map(key => {\n            const field: UseFieldModel = fields[key]\n            return field.validate()\n        })\n        const boolArray = await Promise.all(resolvers)\n        return !boolArray.includes(false)\n    }\n    const handleSubmit = (cb: Function) => {\n        return async (...params: any) => {\n            isSubmit.value = true\n            await validate()\n            if (!isValid.value) return\n            if (isSubmiting.value) return\n            isSubmiting.value = true\n            await cb(...params)\n            isSubmiting.value = false\n        }\n    }\n\n    const serialize = () => {\n        const keys = Object.keys(values)\n        const toSend: any = {}\n        keys.map(key => {\n            let currentKey = rename[key]\n            if (!currentKey) currentKey = key\n            toSend[currentKey] = values[key]\n        })\n        return toSend\n    }\n\n    watch(errors, (newErrors: any) => {\n        const boolArray = Object.keys(newErrors).map(key => {\n            const currentErrors = newErrors[key]\n            return currentErrors.length < 1\n        })\n        isValid.value = !boolArray.includes(false)\n    })\n    watch(isSubmit, () => {\n        if (isSubmit && watchAfterSubmit) {\n            watch(values, newValues => {\n                validate()\n            })\n        }\n    })\n\n\n    return { values, errors, isValid, handleSubmit, validate, serialize }\n}\n"],"sourceRoot":""}